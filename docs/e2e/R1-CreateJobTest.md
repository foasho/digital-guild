# R1-CreateJobTest: ジョブ作成 E2Eテスト手順書

## 概要

リクエスター（依頼者）が新規ジョブを作成する機能のE2Eテストです。  
大分県の地方で小さな店舗を営むユーザーを想定し、年末大掃除の手伝いや景観整備などの実際的なシナリオでテストを行います。

---

## 前提条件

- フロントエンドサーバーが起動していること（`http://localhost:3000`）
- リクエスターとしてログイン済みであること
- 補助金残高が存在すること（AIインセンティブ算出のため）

---

## テストシナリオ

### シナリオ1: 年末大掃除の手伝い募集

**ペルソナ**: 大分県竹田市で老舗の和菓子店「竹田屋」を営む田中さん（60代）

#### テストデータ

| 項目 | 入力値 |
|------|--------|
| タイトル | 和菓子店の年末大掃除おてつだい |
| 説明 | 創業50年の和菓子店です。年末の大掃除を一緒に手伝ってくださる方を募集しています。窓拭き、床掃除、棚の整理などをお願いします。昼食と手作り和菓子のお土産付きです！ |
| 報酬 | ¥8,000 |
| 定員 | 3名 |
| 場所 | 大分県竹田市竹田町 |
| 予定日 | （テスト実施日から1週間後の日付） |
| スキル | 清掃、軽作業 |
| チェックリスト | ①窓ガラスの清掃 ②床の拭き掃除 ③棚の整理整頓 ④外回りの掃き掃除 |

#### テスト手順

1. **ジョブ作成画面へ遷移**
   - リクエスターダッシュボード（`/requester/dashboard`）にアクセス
   - 「新規ジョブ作成」ボタンをクリック
   - `/requester/jobs/new` に遷移することを確認

2. **セクション1: 基本情報の入力**
   - タイトル欄に「和菓子店の年末大掃除おてつだい」を入力
   - 説明欄に上記の説明文を入力
   - 報酬スライダーを ¥8,000 に設定（または直接入力）
   - 定員を「3名」に設定（+ボタンを2回クリック）

3. **セクション2: 場所・日時の入力**
   - 場所欄に「大分県竹田市竹田町」を入力
   - マップ上で大分県竹田市付近をクリックして位置を選択
   - 予定日をテスト実施日から1週間後に設定

4. **セクション3: スキル・チェックリストの設定**
   - スキル選択で「清掃」「軽作業」をクリック
   - チェックリスト入力欄に以下を順次追加：
     - 「窓ガラスの清掃」→ Enter
     - 「床の拭き掃除」→ Enter
     - 「棚の整理整頓」→ Enter
     - 「外回りの掃き掃除」→ Enter

5. **ジョブ作成の実行**
   - 「ジョブを作成する」ボタンが有効になっていることを確認
   - ボタンをクリック
   - ダッシュボード（`/requester/dashboard`）にリダイレクトされることを確認

6. **作成確認**
   - ダッシュボードに新規作成したジョブが表示されていることを確認
   - ジョブのタイトル、報酬、定員が正しいことを確認

#### 期待結果

- [x] ジョブが正常に作成される
- [x] AIインセンティブが自動で付与される
- [x] ダッシュボードにジョブが表示される
- [x] すべての入力内容が正しく保存されている

---

### シナリオ2: 庭園・景観整備の手伝い募集

**ペルソナ**: 大分県由布市で古民家カフェ「湯布院茶房」を営む佐藤さん（50代）

#### テストデータ

| 項目 | 入力値 |
|------|--------|
| タイトル | 古民家カフェの庭園整備おてつだい |
| 説明 | 湯布院の自然に囲まれた古民家カフェです。春に向けて庭園の整備を手伝ってくださる方を募集します。草むしり、落ち葉清掃、植栽の手入れなど。カフェのランチとドリンクをご用意しています。自然が好きな方、ガーデニング経験者歓迎！ |
| 報酬 | ¥12,000 |
| 定員 | 2名 |
| 場所 | 大分県由布市湯布院町 |
| 予定日 | （テスト実施日から2週間後の日付） |
| スキル | 庭仕事、屋外作業 |
| チェックリスト | ①草むしり ②落ち葉の清掃 ③植栽の剪定補助 ④石畳の苔取り |

#### テスト手順

1. **ジョブ作成画面へ遷移**
   - `/requester/jobs/new` にアクセス

2. **セクション1: 基本情報の入力**
   - タイトル欄に「古民家カフェの庭園整備おてつだい」を入力
   - 説明欄に上記の説明文を入力
   - 報酬スライダーを ¥12,000 に設定
   - 定員を「2名」に設定

3. **セクション2: 場所・日時の入力**
   - 場所欄に「大分県由布市湯布院町」を入力
   - マップ上で由布市付近をクリックして位置を選択
   - 予定日をテスト実施日から2週間後に設定

4. **セクション3: スキル・チェックリストの設定**
   - スキル選択で「庭仕事」「屋外作業」をクリック
   - チェックリスト入力欄に以下を順次追加：
     - 「草むしり」→ Enter
     - 「落ち葉の清掃」→ Enter
     - 「植栽の剪定補助」→ Enter
     - 「石畳の苔取り」→ Enter

5. **ジョブ作成の実行**
   - 「ジョブを作成する」ボタンをクリック
   - ダッシュボードにリダイレクトされることを確認

#### 期待結果

- [x] ジョブが正常に作成される
- [x] スキルタグが正しく設定されている
- [x] チェックリストが4項目すべて登録されている

---

### シナリオ3: バリデーションエラーの確認

**目的**: 必須項目未入力時のエラー表示を確認する

#### テスト手順

1. **ジョブ作成画面へ遷移**
   - `/requester/jobs/new` にアクセス

2. **必須項目未入力でボタン状態確認**
   - 何も入力せずに「ジョブを作成する」ボタンを確認
   - ボタンが無効（disabled）状態であることを確認

3. **一部のみ入力してボタン状態確認**
   - タイトルのみ入力: ボタンが無効のまま
   - タイトル＋説明を入力: ボタンが無効のまま
   - タイトル＋説明＋報酬を入力: ボタンが無効のまま
   - タイトル＋説明＋報酬＋場所を入力: ボタンが無効のまま
   - すべての必須項目（タイトル、説明、報酬、場所、予定日）を入力: ボタンが有効になる

#### 期待結果

- [x] 必須項目がすべて入力されるまでボタンが無効
- [x] 必須項目がすべて入力されるとボタンが有効になる

---

### シナリオ4: チェックリストの操作確認

**目的**: チェックリストの追加・削除機能を確認する

#### テスト手順

1. **チェックリスト追加（Enterキー）**
   - チェックリスト入力欄に「テスト項目1」を入力
   - Enterキーを押下
   - 項目が追加され、入力欄がクリアされることを確認

2. **チェックリスト追加（+ボタン）**
   - チェックリスト入力欄に「テスト項目2」を入力
   - +ボタンをクリック
   - 項目が追加されることを確認

3. **チェックリスト削除**
   - 追加した項目にホバー
   - ゴミ箱アイコンが表示されることを確認
   - ゴミ箱アイコンをクリック
   - 項目が削除されることを確認

4. **空入力の防止**
   - 入力欄を空のまま+ボタンをクリック
   - ボタンが無効で、項目が追加されないことを確認

#### 期待結果

- [x] Enterキーで項目追加可能
- [x] +ボタンで項目追加可能
- [x] 項目の削除が可能
- [x] 空の項目は追加できない

---

### シナリオ5: スキル選択の操作確認

**目的**: スキルタグの選択・解除機能を確認する

#### テスト手順

1. **スキル選択**
   - 「撮影」タグをクリック
   - タグが選択状態（solid）になり、チェックマークが表示されることを確認
   - 「選択中」のカウントが表示されることを確認

2. **複数スキル選択**
   - 追加で「接客」「軽作業」をクリック
   - 3件のスキルが選択状態になることを確認
   - 「3件のスキルを選択中」と表示されることを確認

3. **スキル選択解除**
   - 選択済みの「撮影」タグをクリック
   - 選択が解除され、通常状態に戻ることを確認
   - 「2件のスキルを選択中」と表示が更新されることを確認

#### 期待結果

- [x] スキルの選択・解除がトグルで動作する
- [x] 選択状態が視覚的に識別できる
- [x] 選択件数が正しく表示される

---

## 補足事項

### テスト環境

- ブラウザ: Chrome（最新版）, Safari, Firefox
- 画面サイズ: デスクトップ（1920x1080）, モバイル（375x812）

### 注意点

1. マップ操作はLeafletを使用しているため、クリック位置の精度に注意
2. 報酬スライダーのステップは1,000円単位
3. 日付入力はブラウザのネイティブDate Pickerを使用

### 関連ページ

- リクエスターダッシュボード: `/requester/dashboard`
- ジョブ詳細ページ: `/requester/jobs/[job_id]`

---

## 更新履歴

| 日付 | 更新者 | 内容 |
|------|--------|------|
| 2026-01-03 | - | 初版作成 |

